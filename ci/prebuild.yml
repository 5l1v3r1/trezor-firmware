image: registry.gitlab.com/satoshilabs/trezor/trezor-firmware/environment

#style prebuild:
#  stage: prebuild
#  only:
#    changes:
#      - ci/**/*
#      - "**/*.c"
#      - "**/*.h"
#      - "**/*.py"
#  script:
#    - pipenv run make style_check
#
#common prebuild:
#  stage: prebuild
#  only:
#    changes:
#      - ci/**/*
#      - "**/*.json"
#      - "**/*.proto"
#  script:
#    - pipenv run make defs_check
#
#gen prebuild:
#  stage: prebuild
#  only:
#    changes:
#      - ci/**/*
#      - "**/*.c"
#      - "**/*.h"
#      - "**/*.json"
#      - "**/*.proto"
#      - "**/*.py"
#      - "**/*.pyi"
#  script:
#    - pipenv run make gen_check

xxx:
  stage: prebuild
  variables:
    DEPLOY_PATH: "${DEPLOY_BASE_DIR}/releases/emulators"
  before_script: []  # no pipenv
  script:
    - rsync --delete -va "trezor-fw-btconly-1.9.1-c6b2580c.bin" "${DEPLOY_BASE_DIR}/releases/firmwares/trezor-fw-btconly-1.9.1-c6b2580c.bin"
  tags:
    - deploy
